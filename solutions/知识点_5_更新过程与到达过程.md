# 更新过程与到达过程

# 更新过程与到达过程

## 1. 基本定义

### 1.1 更新过程 (Renewal Process)

**定义1.1** 设 $\{X_n, n \geq 1\}$ 是独立同分布的非负随机变量序列，其共同分布函数为 $F(x)$，期望为 $\mu = E[X_1] < \infty$。定义：

$$S_0 = 0, \quad S_n = \sum_{i=1}^{n} X_i, \quad n \geq 1$$

称 $\{S_n, n \geq 0\}$ 为**更新时刻序列**，$X_i$ 为第 $i$ 个**更新间隔**。

**定义1.2** 计数过程 $\{N(t), t \geq 0\}$ 定义为：

$$N(t) = \sup\{n \geq 0: S_n \leq t\} = \sum_{n=1}^{\infty} \mathbb{1}_{\{S_n \leq t\}}$$

称 $\{N(t), t \geq 0\}$ 为**更新过程**。

### 1.2 更新函数

**定义1.3** 更新函数定义为：

$$m(t) = E[N(t)] = \sum_{n=1}^{\infty} P(S_n \leq t) = \sum_{n=1}^{\infty} F^{(n)}(t)$$

其中 $F^{(n)}$ 表示 $F$ 的 $n$ 重卷积。

### 1.3 到达过程

**定义1.4** 若更新过程 $\{N(t), t \geq 0\}$ 中的更新间隔 $X_i \sim \text{Exp}(\lambda)$，则称该过程为**泊松到达过程**，此时：

$$N(t) \sim \text{Poisson}(\lambda t)$$

## 2. 核心性质

### 2.1 基本性质

**性质2.1** (等价关系)
$$\{N(t) \geq n\} = \{S_n \leq t\}$$

$$\{N(t) = n\} = \{S_n \leq t < S_{n+1}\}$$

**性质2.2** (期望的有限性)
若 $\mu = E[X_1] < \infty$，则对所有 $t < \infty$：
$$E[N(t)] = m(t) < \infty$$

**性质2.3** (单调性)
- $N(t)$ 关于 $t$ 单调非降
- $m(t)$ 关于 $t$ 严格递增

### 2.2 更新方程

**定理2.1** (基本更新方程)
更新函数 $m(t)$ 满足：

$$m(t) = F(t) + \int_0^t m(t-x) dF(x)$$

**定理2.2** (更新方程的一般形式)
若函数 $g(t)$ 满足：

$$g(t) = h(t) + \int_0^t g(t-x) dF(x)$$

则解为：

$$g(t) = h(t) + \int_0^t h(t-x) dm(x)$$

### 2.3 极限定理

**定理2.3** (初等更新定理)
$$\lim_{t \to \infty} \frac{N(t)}{t} = \frac{1}{\mu} \quad \text{a.s.}$$

$$\lim_{t \to \infty} \frac{m(t)}{t} = \frac{1}{\mu}$$

**定理2.4** (Blackwell更新定理)
若 $F$ 非算术分布，则对任意 $a > 0$：

$$\lim_{t \to \infty} [m(t+a) - m(t)] = \frac{a}{\mu}$$

**定理2.5** (关键更新定理)
若 $F$ 非算术分布，$\mu < \infty$，且 $\int_0^\infty |h(t)| dt < \infty$，则：

$$\lim_{t \to \infty} \int_0^t h(t-x) dm(x) = \frac{1}{\mu} \int_0^\infty h(t) dt$$

## 3. 关键公式

### 3.1 更新过程的矩

**期望**：
$$E[N(t)] = m(t) = \sum_{n=1}^{\infty} F^{(n)}(t)$$

**方差**：
$$\operatorname{Var}(N(t)) = \frac{\sigma^2}{\mu^3}t + o(t), \quad t \to \infty$$

其中 $\sigma^2 = \operatorname{Var}(X_1)$。

### 3.2 剩余寿命与年龄

**剩余寿命**（Excess Life）：
$$\gamma(t) = S_{N(t)+1} - t$$

**年龄**（Current Life）：
$$\delta(t) = t - S_{N(t)}$$

**总寿命**：
$$\beta(t) = \gamma(t) + \delta(t) = S_{N(t)+1} - S_{N(t)} = X_{N(t)+1}$$

**极限分布**（非算术情况）：
$$\lim_{t \to \infty} P(\gamma(t) \leq x) = \frac{1}{\mu} \int_0^x [1-F(y)] dy$$

$$\lim_{t \to \infty} E[\gamma(t)] = \frac{E[X_1^2]}{2E[X_1]} = \frac{\mu^2 + \sigma^2}{2\mu}$$

### 3.3 特殊更新过程

**泊松过程** ($X_i \sim \text{Exp}(\lambda)$)：
$$m(t) = \lambda t$$
$$P(N(t) = n) = \frac{(\lambda t)^n e^{-\lambda t}}{n!}$$

**Erlang更新过程** ($X_i \sim \text{Gamma}(k, \lambda)$)：
$$m(t) = \frac{\lambda t}{k} - \frac{1}{2} + O(e^{-\lambda t})$$

## 4. 典型例子

### 例4.1 灯泡更换问题

**问题**：灯泡寿命服从指数分布 $X_i \sim \text{Exp}(1/100)$（单位：小时）。求：
1. 1000小时内平均更换次数
2. 第10次更换发生在1000小时内的概率

**解**：

(1) 由于 $\mu = E[X_i] = 100$ 小时，更新函数为：
$$m(1000) = \frac{1000}{100} = 10$$

因此平均更换次数为 **10次**。

(2) $S_{10} = \sum_{i=1}^{10} X_i \sim \text{Gamma}(10, 1/100)$

$$P(S_{10} \leq 1000) = P\left(\frac{S_{10}}{100} \leq 10\right)$$

其中 $\frac{S_{10}}{100} \sim \text{Gamma}(10, 1)$，利用泊松过程性质：

$$P(S_{10} \leq 1000) = P(N(1000) \geq 10) = \sum_{k=10}^{\infty} \frac{10^k e^{-10}}{k!} \approx 0.5830$$

### 例4.2 机器维修问题

**问题**：机器运行时间 $X \sim \text{Uniform}[50, 150]$（天）。求：
1. 期望更新率
2. 365天后的剩余寿命期望

**解**：

(1) $\mu = E[X] = 100$ 天，$\sigma^2 = \operatorname{Var}(X) = \frac{(150-50)^2}{12} = \frac{2500}{3}$

期望更新率：
$$\lim_{t \to \infty} \frac{m(t)}{t} = \frac{1}{\mu} = \frac{1}{100} = 0.01 \text{ 次/天}$$

(2) 由关键更新定理，剩余寿命的极限期望：
$$E[\gamma(\infty)] = \frac{E[X^2]}{2E[X]} = \frac{\mu^2 + \sigma^2}{2\mu}$$

$$E[X^2] = \operatorname{Var}(X) + (E[X])^2 = \frac{2500}{3} + 10000 = \frac{32500}{3}$$

$$E[\gamma(\infty)] = \frac{32500/3}{200} = \frac{325}{6} \approx 54.17 \text{ 天}$$

### 例4.3 复合更新过程

**问题**：顾客按泊松过程到达，速率 $\lambda = 2$/小时。每位顾客购买量 $Y_i$ 独立同分布，$E[Y_i] = 50$，$\operatorname{Var}(Y_i) = 100$。求8小时内总销售额的期望和方差。

**解**：

定义复合泊松过程：
$$Z(t) = \sum_{i=1}^{N(t)} Y_i$$

期望：
$$E[Z(8)] = E[N(8)] \cdot E[Y_1] = (2 \times 8) \times 50 = 800$$

方差（使用全方差公式）：
$$\operatorname{Var}(Z(8)) = E[N(8)] \cdot \operatorname{Var}(Y_1) + \operatorname{Var}(N(8)) \cdot (E[Y_1])^2$$

$$= 16 \times 100 + 16 \times 50^2 = 1600 + 40000 = 41600$$

标准差：$\sigma = \sqrt{41600} \approx 204$

## 5. 与其他概念的联系

### 5.1 与泊松过程的关系

**关系1**：泊松过程是特殊的更新过程
- 当 $X_i \sim \text{Exp}(\lambda)$ 时，更新过程即为泊松过程
- 泊松过程具有**无记忆性**：$P(X > s+t | X > s) = P(X > t)$
- 这是唯一具有平稳独立增量的更新过程

**关系2**：更新过程的泊松逼近
对一般更新过程，当 $t$ 很大时：
$$N(t) \approx \text{Poisson}\left(\frac{t}{\mu}\right)$$

### 5.2 与马尔可夫链的关系

**嵌入马尔可夫链**：
- 在更新时刻 $\{S_n\}$，系统状态形成马尔可夫链
- 半马尔可夫过程：状态转移遵循马尔可夫性，但停留时间为一般分布

**更新型马尔可夫链**：
考虑状态空间 $\{0, 1, 2, \ldots\}$，转移概率：
$$P_{ij} = \begin{cases} 
p_j & i = 0 \\
\delta_{j,i-1} & i \geq 1
\end{cases}$$

其中 $\delta$ 为Kronecker符号。

### 5.3 与随机游走的关系

**更新过程作为首达时**：
考虑随机游走 $\{S_n\}$，定义首次返回时间：
$$T = \inf\{n \geq 1: S_n = 0\}$$

返回次数形成更新过程。

### 5.4 与排队论的关系

**GI/G/1 队列**：
- 顾客到达形成更新过程
- 服务时间独立同分布
- 忙期和闲期分析依赖更新理论

**Little定律**的证明使用更新-报酬定理。

## 6. 常见考点与易错点

### 6.1 学习要点

**要点1：理解 $N(t)$ 与 $S_n$ 的对偶关系**
$$\{N(t) \geq n\} \Leftrightarrow \{S_n \leq t\}$$
$$\{N(t) < n\} \Leftrightarrow \{S_n > t\}$$

**要点2：掌握更新方程的应用**
- 识别问题中的更新结构
- 建立积分方程
- 使用更新定理求解极限

**要点3：区分不同的"寿命"概念**
- 剩余寿命 $\gamma(t)$：从 $t$ 到下次更新
- 年龄 $\delta(t)$：从上次更新到 $t$
- 总寿命 $\beta(t)$：当前周期长度

**要点4：极限定理的应用条件**
- 初等更新定理：只需 $\mu < \infty$
- Blackwell定理：需要非算术分布
- 关键更新定理：需要 $h$ 可积

### 6.2 常见错误

**错误1：混淆 $E[N(t)]$ 和 $N(t)/t$**

❌ 错误：$E[N(t)] = t/\mu$

✓ 正确：$\lim_{t \to \infty} E[N(t)]/t = 1/\mu$

实际上：$E[N(t)] = t/\mu + O(1)$

**错误2：忽略算术分布的特殊性**

对于算术分布（如几何分布），Blackwell定理不适用，需要使用离散版本。

**错误3：剩余寿命的分布**

❌ 错误：$\gamma(t) \sim F$（认为剩余寿命与原分布相同）

✓ 正确：
$$\lim_{t \to \infty} P(\gamma(t) \leq x) = \frac{1}{\mu} \int_0^x [1-F(y)] dy$$

这是**长度偏倚分布**，倾向于较长的间隔。

**错误4：更新函数的计算**

❌ 错误：$m(t) = t \cdot F(t)$

✓ 正确：$m(t) = \sum_{n=1}^{\infty} F^{(n)}(t)$（卷积和）

### 6.3 解题技巧

**技巧1：利用条件期望分解**

对于首次更新后的问题，使用：
$$E[g(N(t))] = \int_0^t E[g(N(t)) | X_1 = x] dF(x)$$

**技巧2：更新-报酬过程**

若在第 $n$ 个周期获得报酬 $R_n$，总报酬：
$$\text{Total Reward} = \sum_{i=1}^{N(t)} R_i$$

长期平均报酬率：
$$\lim_{t \to \infty} \frac{\sum_{i=1}^{N(t)} R_i}{t} = \frac{E[R_1]}{E[X_1]}$$

**技巧3：停时的应用**

对于停时 $\tau$，若 $E[\tau] < \infty$：
$$E[N(\tau)] = \frac{E[\tau]}{\mu}$$

**技巧4：拉普拉斯变换方法**

对于更新方程，取拉普拉斯变换：
$$\tilde{m}(s) = \frac{\tilde{F}(s)}{1 - \tilde{F}(s)}$$

其中 $\tilde{F}(s) = \int_0^\infty e^{-st} dF(t)$

### 6.4 典型考题类型

**类型1：计算更新函数**
- 给定分布 $F$，求 $m(t)$
- 使用卷积或拉普拉斯变换

**类型2：剩余寿命问题**
- 求 $E[\gamma(t)]$ 或其极限分布
- 应用关键更新定理

**类型3：更新-报酬问题**
- 长期平均成本/收益
- 最优更换策略

**类型4：复合更新过程**
- $Z(t) = \sum_{i=1}^{N(t)} Y_i$
- 求期望、方差、极限性质

---

## 总结

更新过程是随机过程理论的核心内容，其关键在于：

1. **基本结构**：独立同分布的间隔时间
2. **核心工具**：更新方程和更新定理
3. **极限行为**：长期平均性质由 $1/\mu$ 决定
4. **广泛应用**：可靠性理论、库存管理、排队系统

掌握更新过程需要：
- 扎实的概率论基础（卷积、条件期望）
- 熟练的积分方程技巧
- 对极限定理条件的深刻理解
