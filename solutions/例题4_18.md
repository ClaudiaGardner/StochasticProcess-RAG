# 例题4.18

## 题目

剩余寿命的分布 我们想要找到Y (t) 的时间平均累积分布函数（CDF） ，即对于任何给定的y， Y (t) ⩽ y 的时间所占的比例。 R(t) = ( 1, eX(t) − Z(t) ⩽ y, 0, 其它。 因此，Rn = min{y, Xn}。 E[Rn] = E[min{X, y}] = Z y x=0 Pr{X > x }dx。 FY (y) = E[Rn] X = 1 X Z y x=0 Pr{X > x }dx WP1。

## 解答

**Focusing on Solution Process**

I'm now fully immersed in the solution process. I'm focusing on defining the renewal process, detailing the residual life and applying the renewal reward theorem.  The expected reward calculation, especially integrating tail probabilities, feels right, but I'll make sure to verify the formulas to ensure there are no errors before providing the answer. I will also make sure to write out the derivation completely to maintain rigor.


### 题目分析

本题考查**更新理论（Renewal Theory）**中的**剩余寿命（Residual Life/Excess Life）**的极限分布。题目给出的文本片段实际上是利用**更新报酬定理（Renewal Reward Theorem）**来推导剩余寿命 $Y(t)$ 的时间平均累积分布函数（CDF）。

题目中的符号含义如下：
- $X_n$：第 $n$ 个更新周期（寿命），假设为独立同分布（i.i.d.），均值为 $E[X]$。
- $Y(t)$：时刻 $t$ 的剩余寿命，即从 $t$ 到下一次更新发生的时间。
- $R(t)$：指示函数（报酬率），当 $Y(t) \le y$ 时为 1，否则为 0。
- $R_n$：第 $n$ 个更新周期内累积的报酬（即该周期内剩余寿命小于等于 $y$ 的持续时间）。
- 目标：求解 $F_Y(y) = \lim_{t \to \infty} P(Y(t) \le y)$。

---

### 解题过程

我们将利用更新报酬定理来求解。

**1. 定义更新过程与报酬函数**

设 $\{N(t), t \ge 0\}$ 是一个更新过程，其更新间距（寿命）为 $X_1, X_2, \dots$，它们是独立同分布的非负随机变量，累积分布函数为 $F(x)$，概率密度函数为 $f(x)$，且均值 $E[X] = \mu < \infty$。

定义时刻 $t$ 的剩余寿命 $Y(t)$ 为：
$$Y(t) = S_{N(t)+1} - t$$
其中 $S_n = \sum_{i=1}^n X_i$ 是第 $n$ 次更新发生的时刻。

为了求 $Y(t)$ 的长期时间平均分布，我们定义报酬率函数 $r(t)$：
$$r(t) = \begin{cases} 1, & \text{如果 } Y(t) \le y \\ 0, & \text{其它} \end{cases}$$

**2. 应用更新报酬定理**

根据更新报酬定理，如果 $E[R_n] < \infty$ 且 $E[X_n] < \infty$，则总报酬的时间平均极限等于一个更新周期内的期望报酬除以期望周期长度：
$$ \lim_{t \to \infty} \frac{1}{t} \int_0^t r(u) du = \frac{E[R_1]}{E[X_1]} \quad (\text{WP1})$$
其中，左边即为剩余寿命小于等于 $y$ 的时间比例，即极限分布 $F_Y(y)$。

**3. 分析单个周期内的报酬 $R_1$**

考虑第一个更新周期，长度为 $X_1$。在该周期的时间区间 $[0, X_1)$ 内，剩余寿命从 $X_1$ 线性递减至 0。具体来说，在时刻 $t \in [0, X_1)$，剩余寿命为 $X_1 - t$。

我们需要计算在该周期内，满足 $X_1 - t \le y$ 的时间长度 $R_1$。
条件 $X_1 - t \le y$ 等价于 $t \ge X_1 - y$。
同时，时间 $t$ 必须在周期内，即 $0 \le t \le X_1$。

因此，满足条件的时间长度为：
$$R_1 = \text{Length}\left( [0, X_1] \cap [X_1 - y, X_1] \right)$$

分两种情况讨论：
1. 如果 $X_1 \le y$，则整个周期内剩余寿命都小于等于 $y$（因为最大剩余寿命就是 $X_1$）。此时持续时间为 $X_1$。
2. 如果 $X_1 > y$，则只有最后 $y$ 个单位时间的剩余寿命小于等于 $y$。此时持续时间为 $y$。

综上所述，一个周期内的累积报酬为：
$$R_1 = \min(X_1, y)$$

**4. 计算期望报酬 $E[R_1]$**

利用非负随机变量期望的尾概率公式 $E[Z] = \int_0^\infty P(Z > t) dt$，我们计算 $E[\min(X, y)]$：

$$E[R_1] = E[\min(X, y)] = \int_0^\infty P(\min(X, y) > x) dx$$

由于 $\min(X, y) > x$ 意味着 $X > x$ 且 $y > x$。
- 当 $x < y$ 时，$P(\min(X, y) > x) = P(X > x)$。
- 当 $x \ge y$ 时，$P(\min(X, y) > x) = 0$（因为 $\min(X, y)$ 不可能超过 $y$）。

因此，积分上限变为 $y$：
$$E[R_1] = \int_0^y P(X > x) dx = \int_0^y [1 - F(x)] dx$$

**5. 得出极限分布**

将 $E[R_1]$ 和 $E[X_1] = E[X]$ 代入更新报酬定理公式：

$$F_Y(y) = \lim_{t \to \infty} P(Y(t) \le y) = \frac{E[R_1]}{E[X]} = \frac{\int_0^y P(X > x) dx}{E[X]}$$

---

### 答案

剩余寿命 $Y(t)$ 的极限累积分布函数为：

$$ F_Y(y) = \frac{1}{E[X]} \int_0^y P(X > x) \, dx $$

或者写作：
$$ F_Y(y) = \frac{1}{\mu} \int_0^y (1 - F(x)) \, dx $$

---

### 知识延伸

1.  **定理名称**：本题核心应用了**更新报酬定理 (Renewal Reward Theorem)**。该定理是处理长时间平均性质的强力工具。
2.  **平衡分布 (Equilibrium Distribution)**：推导出的分布 $F_Y(y)$ 被称为 $F$ 的平衡分布，通常记为 $F_e(y)$。
3.  **年龄与剩余寿命的对称性**：在更新过程中，**当前年龄 (Current Age)** $A(t)$（即上次更新发生到现在的时间）的极限分布与剩余寿命 $Y(t)$ 的极限分布是完全相同的。
4.  **检查悖论 (Inspection Paradox)**：
    - 如果 $X$ 服从指数分布（泊松过程），则 $P(X>x) = e^{-\lambda x}$，计算可得 $F_Y(y) = 1 - e^{-\lambda y}$。即剩余寿命仍服从指数分布（无记忆性）。
    - 对于一般分布，剩余寿命的均值 $E[Y] = \frac{E[X^2]}{2E[X]}$。由于 $E[X^2] \ge (E[X])^2$，通常有 $E[Y] \ge \frac{1}{2}E[X]$。这解释了为什么随机时刻观察到的剩余寿命往往比“平均寿命的一半”要长（因为随机时刻更容易落在较长的区间内）。

---
