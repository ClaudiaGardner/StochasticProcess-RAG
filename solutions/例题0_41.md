# 例题0.41

## 题目

非负随机变量的数学期望的几何意义： （1）X ≥ 0，EX； （2）Y = X2，EY ； （3）X ≥ 0，Y = min(1，X)，说明 EY = P(X ≥ U)，其中 U 是独立于 X, 取值于 [0，1] 区间的均匀 随机变量； （4）非负整数变量 X，EX = ∞P i=1 P (X ≥ i)。

## 解答

**Elaborating the Solution**

I'm now fully immersed in the problem, focusing on constructing the LaTeX-formatted solutions for each part. I'm paying close attention to the geometric interpretations for continuous RVs, particularly the use of the area under the survival function. Also ensuring a clean, rigorous, and direct style in the explanations. The discrete case is also being worked on now.


### 题目分析
本题主要考查**非负随机变量数学期望的尾概率公式**（Tail Sum Formula）及其几何意义。题目涉及数学符号包括数学期望 $E[\cdot]$、概率 $P(\cdot)$、均匀分布随机变量 $U$ 以及求和符号 $\sum$。
核心概念利用了积分与求和交换次序（Fubini定理在概率论中的应用）以及指示函数法。
题目要求：
1.  给出非负随机变量 $X$ 的期望 $E[X]$ 的积分表达（几何意义）。
2.  给出 $Y=X^2$ 的期望 $E[Y]$ 的积分表达。
3.  证明截断变量 $Y=\min(1, X)$ 的期望等于 $P(X \ge U)$。
4.  证明非负整数变量 $X$ 的期望等于其尾概率之和。

---

### 解题过程

#### (1) 非负随机变量 $X \ge 0$ 的数学期望 $E[X]$

设 $X$ 为非负随机变量，其累积分布函数为 $F(x)$，生存函数（尾概率）为 $S(x) = P(X > x) = 1 - F(x)$。
根据数学期望的定义（以连续型为例，利用分部积分法）：
$$
E[X] = \int_0^{\infty} x f(x) \, dx
$$
利用恒等式 $x = \int_0^x 1 \, dt$，将其代入上式：
$$
E[X] = \int_0^{\infty} \left( \int_0^x 1 \, dt \right) f(x) \, dx
$$
交换积分次序（积分区域为 $0 \le t \le x < \infty$）：
$$
E[X] = \int_0^{\infty} \left( \int_t^{\infty} f(x) \, dx \right) dt
$$
内部积分 $\int_t^{\infty} f(x) \, dx$ 正是 $P(X > t)$。因此：
$$
E[X] = \int_0^{\infty} P(X > t) \, dt
$$
**几何意义**：$E[X]$ 等于生存函数曲线 $y = P(X > x)$ 与坐标轴 $x=0, y=0$ 所围成的图形面积。

#### (2) $Y = X^2$ 的数学期望 $E[Y]$

由于 $Y = X^2$ 也是非负随机变量，直接应用上述结论：
$$
E[Y] = \int_0^{\infty} P(Y > t) \, dt
$$
将 $Y=X^2$ 代入：
$$
E[X^2] = \int_0^{\infty} P(X^2 > t) \, dt = \int_0^{\infty} P(X > \sqrt{t}) \, dt
$$
若作变量代换，令 $t = x^2$，则 $dt = 2x \, dx$，上式也可表示为：
$$
E[X^2] = \int_0^{\infty} P(X > x) \cdot 2x \, dx
$$
**几何意义**：$E[X^2]$ 是曲线 $y = P(X > \sqrt{t})$ 下方的面积，或者是以 $2x$ 为权重的生存函数加权积分。

#### (3) 证明 $E[\min(1, X)] = P(X \ge U)$

**步骤 1：计算 $E[Y]$**
令 $Y = \min(1, X)$。这是一个取值在 $[0, 1]$ 之间的非负随机变量。
利用 (1) 中的结论，但积分上限受限于 $Y$ 的最大值 1：
$$
E[Y] = \int_0^{\infty} P(Y > t) \, dt = \int_0^1 P(\min(1, X) > t) \, dt + \int_1^{\infty} P(\min(1, X) > t) \, dt
$$
当 $t \ge 1$ 时，$P(\min(1, X) > t) = 0$。
当 $0 \le t < 1$ 时，事件 $\{\min(1, X) > t\}$ 等价于 $\{1 > t \text{ 且 } X > t\}$，即 $\{X > t\}$。
因此：
$$
E[Y] = \int_0^1 P(X > t) \, dt
$$
（注：对于连续型分布，$P(X>t) = P(X \ge t)$；对于一般情况，积分值的差异仅在可数个点上，不影响黎曼/勒贝格积分结果，故可写为 $\int_0^1 P(X \ge t) \, dt$）。

**步骤 2：计算 $P(X \ge U)$**
设 $U \sim U[0, 1]$，且 $X$ 与 $U$ 独立。利用全概率公式（关于 $U$ 积分）：
$$
P(X \ge U) = \int_{-\infty}^{\infty} P(X \ge u \mid U=u) f_U(u) \, du
$$
由于 $X, U$ 独立，且 $U$ 的概率密度函数 $f_U(u) = 1$ (当 $u \in [0, 1]$)：
$$
P(X \ge U) = \int_0^1 P(X \ge u) \cdot 1 \, du = \int_0^1 P(X \ge u) \, du
$$
**结论**：
对比步骤 1 和步骤 2 的结果，可知：
$$
E[\min(1, X)] = \int_0^1 P(X \ge t) \, dt = P(X \ge U)
$$

#### (4) 非负整数变量 $X$ 的期望 $E[X] = \sum_{i=1}^{\infty} P(X \ge i)$

设 $X$ 取值为 $\{0, 1, 2, \dots\}$。根据期望定义：
$$
E[X] = \sum_{k=0}^{\infty} k P(X = k) = \sum_{k=1}^{\infty} k P(X = k)
$$
利用恒等式 $k = \sum_{i=1}^k 1$，代入上式：
$$
E[X] = \sum_{k=1}^{\infty} \left( \sum_{i=1}^k 1 \right) P(X = k)
$$
交换求和次序。考虑 $(i, k)$ 的取值范围：$1 \le i \le k < \infty$。交换后先对 $k$ 求和，范围是 $k \ge i$：
$$
E[X] = \sum_{i=1}^{\infty} \sum_{k=i}^{\infty} P(X = k)
$$
内部求和 $\sum_{k=i}^{\infty} P(X = k)$ 正是 $P(X \ge i)$。
因此：
$$
E[X] = \sum_{i=1}^{\infty} P(X \ge i)
$$

---

### 答案

1.  $E[X] = \int_0^{\infty} P(X > t) \, dt$
2.  $E[Y] = \int_0^{\infty} P(X^2 > t) \, dt = \int_0^{\infty} 2x P(X > x) \, dx$
3.  $E[Y] = \int_0^1 P(X \ge t) \, dt = P(X \ge U)$
4.  $E[X] = \sum_{i=1}^{\infty} P(X \ge i)$

---

### 知识延伸

1.  **尾概率公式 (Tail Sum Formula)**：
    本题的核心是 $E[X] = \int_0^\infty P(X>x)dx$。这是一个非常强大的工具，特别是在分布函数（CDF）比密度函数（PDF）更容易获得，或者 PDF 形式复杂难以直接积分 $xf(x)$ 时使用。

2.  **广义形式**：
    对于非负随机变量 $X$ 和可微增函数 $g(x)$（且 $g(0)=0$），有：
    $$
    E[g(X)] = \int_0^{\infty} g'(t) P(X > t) \, dt
    $$
    本题中 (2) 即对应 $g(x)=x^2, g'(t)=2t$ 的情况。

3.  **几何直观**：
    在概率论中，将期望视为“生存函数曲线下的面积”是理解随机变量大小的一个重要直观视角。对于离散变量，这对应于条形图的“横向求和”与“纵向求和”的等价性。

4.  **易错点**：
    *   此公式仅适用于**非负**随机变量。若 $X$ 可取负值，需拆分为 $X = X^+ - X^-$ 分别计算。
    *   在离散情况 (4) 中，求和下限是 $i=1$ 还是 $i=0$ 取决于公式写成 $P(X \ge i)$ 还是 $P(X > i)$。
        *   $E[X] = \sum_{i=1}^\infty P(X \ge i) = \sum_{i=0}^\infty P(X > i)$。

---
