# 例题4.20

## 题目

独立掷一个均匀的骰子。令Xn 表示第n 次所得点数。令Sn = X1 + X2 + · · · + Xn。定义一 个正整数变量J，J = n 当且仅当 Sn > 6. （1）说明 J 是一个停止时间。 （2）计算 {J < 3} 的概率。 （3）计算 {J ≥ 3} 的概率。 （4）计算在给定 X3 = 6 的条件下，{J ≥ 3} 的概率。 假设随机变量序列 Xi 在一个过程 {Xn; n ⩾ 1} 中具有有限数量的可能样本值。那么任何（可能有缺陷的） 终止试验J 可以表示为一棵根树，其中每个样本路径停止的试验被表示为一个终端节点。

## 解答

**Reviewing Solution Draft**

I'm now deep in the process of drafting the solution in LaTeX, meticulously translating the mental plan into a fully formatted response. The key is precise notation and clarity. I'm focusing particularly on the section explaining the conditional probability, ensuring the independence argument is crystal clear and explicitly stated. Also, I'm proofreading thoroughly, paying close attention to minor errors that may slip through.


### 题目分析

本题主要考查随机过程中的**停止时间（Stopping Time）**概念、离散随机变量和的分布计算以及条件概率的独立性性质。

1.  **数学符号识别**：
    *   $X_n$：独立同分布（i.i.d.）的随机变量，服从离散均匀分布 $U\{1, 2, 3, 4, 5, 6\}$。
    *   $S_n = \sum_{i=1}^n X_i$：随机游走或部分和序列。
    *   $J$：定义为 $S_n$ 首次超过 6 的时刻，即首达时间（First Passage Time）。
2.  **核心概念**：
    *   **停止时间**：判断随机变量 $J$ 是否为停止时间，需验证事件 $\{J=n\}$ 是否仅依赖于 $X_1, \dots, X_n$。
    *   **概率计算**：通过枚举或卷积计算离散随机变量之和的概率。
    *   **独立性**：利用随机变量序列的独立性简化条件概率计算。
3.  **求解目标**：
    *   证明 $J$ 的性质。
    *   计算 $J$ 的累积分布函数在特定点的值。
    *   计算给定未来信息下的条件概率。

---

### 解题过程

#### （1）说明 J 是一个停止时间

根据停止时间的定义，对于关于随机变量序列 $\{X_n; n \ge 1\}$ 的自然过滤（Filtration）$\mathcal{F}_n = \sigma(X_1, X_2, \dots, X_n)$，如果对于任意整数 $n \ge 1$，事件 $\{J = n\}$ 属于 $\mathcal{F}_n$，则 $J$ 是停止时间。

由题意，$J = \min\{k : S_k > 6\}$。
事件 $\{J = n\}$ 意味着在第 $n$ 次试验时总和首次超过 6，即前 $n-1$ 次的和都不超过 6，且第 $n$ 次的和超过 6。用数学公式表示为：
$$ \{J = n\} = \{S_1 \le 6, S_2 \le 6, \dots, S_{n-1} \le 6, S_n > 6\} $$
由于 $S_k = X_1 + \dots + X_k$ 仅是 $X_1, \dots, X_k$ 的函数，因此事件 $\{S_k \le 6\}$ 和 $\{S_k > 6\}$ 均由 $X_1, \dots, X_k$ 决定。
显然，事件 $\{J = n\}$ 完全由随机变量 $X_1, X_2, \dots, X_n$ 的取值决定，即 $\{J = n\} \in \mathcal{F}_n$。
**因此，$J$ 是关于序列 $\{X_n\}$ 的停止时间。**

#### （2）计算 $\{J < 3\}$ 的概率

由于 $J$ 是正整数变量，$\{J < 3\}$ 等价于 $\{J = 1\} \cup \{J = 2\}$。这两个事件是互斥的。

1.  **计算 $P(J=1)$**：
    $$ \{J=1\} = \{S_1 > 6\} = \{X_1 > 6\} $$
    因为掷骰子的点数 $X_1 \in \{1, 2, 3, 4, 5, 6\}$，最大值为 6，所以 $P(X_1 > 6) = 0$。
    $$ P(J=1) = 0 $$

2.  **计算 $P(J=2)$**：
    $$ \{J=2\} = \{S_1 \le 6, S_2 > 6\} $$
    由于 $X_1 \le 6$ 总是成立，故 $\{S_1 \le 6\}$ 是必然事件。因此：
    $$ \{J=2\} = \{S_2 > 6\} = \{X_1 + X_2 > 6\} $$
    样本空间总数为 $6 \times 6 = 36$。我们需要计算 $X_1 + X_2 > 6$ 的样本点数。
    令 $k = X_1$，则需要 $X_2 > 6 - k$。
    *   若 $X_1 = 1$，则 $X_2 > 5 \Rightarrow X_2 \in \{6\}$ (1种)
    *   若 $X_1 = 2$，则 $X_2 > 4 \Rightarrow X_2 \in \{5, 6\}$ (2种)
    *   若 $X_1 = 3$，则 $X_2 > 3 \Rightarrow X_2 \in \{4, 5, 6\}$ (3种)
    *   若 $X_1 = 4$，则 $X_2 > 2 \Rightarrow X_2 \in \{3, 4, 5, 6\}$ (4种)
    *   若 $X_1 = 5$，则 $X_2 > 1 \Rightarrow X_2 \in \{2, 3, 4, 5, 6\}$ (5种)
    *   若 $X_1 = 6$，则 $X_2 > 0 \Rightarrow X_2 \in \{1, 2, 3, 4, 5, 6\}$ (6种)

    满足条件的样本点总数为 $1+2+3+4+5+6 = 21$。
    $$ P(J=2) = \frac{21}{36} = \frac{7}{12} $$

3.  **求和**：
    $$ P(J < 3) = P(J=1) + P(J=2) = 0 + \frac{7}{12} = \frac{7}{12} $$

#### （3）计算 $\{J \ge 3\}$ 的概率

利用概率的补集性质：
$$ P(J \ge 3) = 1 - P(J < 3) $$
代入（2）中的结果：
$$ P(J \ge 3) = 1 - \frac{7}{12} = \frac{5}{12} $$

**直观解释**：
事件 $\{J \ge 3\}$ 意味着在前两次投掷后，总和仍然没有超过 6。即：
$$ \{J \ge 3\} \iff \{S_1 \le 6, S_2 \le 6\} \iff \{S_2 \le 6\} $$
计算 $S_2 \le 6$ 的概率为 $1 - P(S_2 > 6) = 1 - \frac{21}{36} = \frac{15}{36} = \frac{5}{12}$。

#### （4）计算在给定 $X_3 = 6$ 的条件下，$\{J \ge 3\}$ 的概率

我们需要计算条件概率：
$$ P(J \ge 3 \mid X_3 = 6) $$

分析事件 $\{J \ge 3\}$ 的构成：
$$ \{J \ge 3\} \iff \{S_2 \le 6\} $$
注意到 $S_2 = X_1 + X_2$ 仅依赖于随机变量 $X_1$ 和 $X_2$。
题目给定 $X_n$ 是独立掷骰子的结果，因此 $X_3$ 与 $\{X_1, X_2\}$ 相互独立。
进而，事件 $\{S_2 \le 6\}$ 与事件 $\{X_3 = 6\}$ 是相互独立的。

根据独立性性质，若事件 $A$ 与事件 $B$ 独立，则 $P(A \mid B) = P(A)$。
令 $A = \{J \ge 3\}$，$B = \{X_3 = 6\}$，则：
$$ P(J \ge 3 \mid X_3 = 6) = P(J \ge 3) $$
直接引用（3）中的结果：
$$ P(J \ge 3 \mid X_3 = 6) = \frac{5}{12} $$

---

### 答案

1.  $J$ 是停止时间，因为 $\{J=n\}$ 完全由 $\{X_1, \dots, X_n\}$ 决定。
2.  $P(J < 3) = \frac{7}{12}$
3.  $P(J \ge 3) = \frac{5}{12}$
4.  $P(J \ge 3 \mid X_3 = 6) = \frac{5}{12}$

---

### 知识延伸

1.  **停止时间（Stopping Time）**：
    *   定义：随机变量 $T$ 是关于过滤 $\mathcal{F}_n$ 的停止时间，若 $\{T=n\} \in \mathcal{F}_n$。
    *   直观理解：你可以在时刻 $n$ 根据过去和现在的信息决定是否停止，而不需要预知未来的信息。
    *   重要定理：**瓦尔德恒等式（Wald's Identity）**。若 $X_n$ 独立同分布且期望有限，$J$ 是有限期望的停止时间，则 $E[S_J] = E[X_1]E[J]$。

2.  **独立增量与条件概率**：
    *   在处理随机过程时，判断事件依赖于哪些时间步的变量至关重要。
    *   本题第（4）问是典型的“无关条件”陷阱。如果条件是 $X_2=6$，结果会完全不同；但条件是未来的 $X_3$，对由过去决定的事件没有影响（在独立性假设下）。

3.  **离散卷积计算技巧**：
    *   计算两个独立均匀分布变量之和 $Z = X+Y$ 的分布时，其概率质量函数图形通常呈三角形（先升后降）。
    *   $P(X+Y=k)$ 的计算可以通过枚举满足 $i+j=k$ 的对数来完成。

4.  **易错点**：
    *   混淆 $\{J > n\}$ 和 $\{J \ge n\}$。
    *   在计算 $P(J=2)$ 时忘记 $P(J=1)=0$ 的前提，虽然本题 $S_1$ 不可能大于 6，但在其他阈值设置下需注意 $\{J=2\} = \{S_1 \le C, S_2 > C\}$。

---
