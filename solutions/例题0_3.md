# 例题0.3

## 题目

一个箱子里有 M 个可区分的球，从中取出n 个，分析如下试验的样本空间的大小。 （1）有放回：有序，无序； （2）不放回：有序，无序。

## 解答

**Analyzing Problem Components**

I've just finished the problem analysis stage. The goal is now to clarify the key symbols ($M$, $n$) and concepts (combinatorics, sampling, etc.). I'm solidifying the four distinct scenarios: ordered/unordered with/without replacement. The core focus remains on deriving the correct formulas for each situation, particularly the unordered with replacement case.


### 题目分析
本题考查概率论与组合数学中的**计数原理（Counting Principles）**，具体涉及排列（Permutation）、组合（Combination）以及多重集排列组合的问题。
题目中 $M$ 代表总体中可区分元素的个数，$n$ 代表抽取的样本量。
核心目标是计算在四种不同抽样机制（有放回/不放回、有序/无序）下的**样本空间大小**（即基本事件的总数 $|\Omega|$）。

### 解题过程

我们将样本空间记为 $\Omega$，其大小记为 $|\Omega|$。

#### （1）有放回情形

**情形 1.1：有放回、有序 (With replacement, Ordered)**
在此情形下，每次抽取都有 $M$ 种可能的结果，且先后抽取的顺序不同被视为不同的样本。
- 第 1 次抽取有 $M$ 种选择；
- 第 2 次抽取仍有 $M$ 种选择（因为是“有放回”）；
- $\dots$
- 第 $n$ 次抽取也有 $M$ 种选择。

根据乘法原理，样本空间的大小为：
$$ |\Omega| = \underbrace{M \times M \times \dots \times M}_{n \text{ times}} = M^n $$
这对应于物理统计中的麦克斯韦-玻尔兹曼统计（Maxwell-Boltzmann statistics）的基本计数模型。

**情形 1.2：有放回、无序 (With replacement, Unordered)**
在此情形下，我们只关心 $M$ 个球中每一个被抽到了多少次，而不关心抽取的先后顺序。
这等价于将 $n$ 个不可区分的球（代表 $n$ 次抽取机会）放入 $M$ 个可区分的盒子（代表 $M$ 个球）中。或者理解为求方程 $x_1 + x_2 + \dots + x_M = n$ 的非负整数解的个数，其中 $x_i$ 表示第 $i$ 个球被抽到的次数。

利用**隔板法（Stars and Bars）**：
我们需要在 $n$ 个“球”和 $M-1$ 个“隔板”之间进行排列。总位置数为 $n + (M-1)$，我们要从中选择 $n$ 个位置放球（或选择 $M-1$ 个位置放隔板）。
因此，样本空间的大小为：
$$ |\Omega| = \binom{n+M-1}{n} = \binom{n+M-1}{M-1} $$
这对应于物理统计中的玻色-爱因斯坦统计（Bose-Einstein statistics）的计数模型。

---

#### （2）不放回情形

**情形 2.1：不放回、有序 (Without replacement, Ordered)**
在此情形下，每次抽取后，该球不再放回箱中，且顺序重要。显然要求 $n \le M$。
- 第 1 次抽取有 $M$ 种选择；
- 第 2 次抽取有 $M-1$ 种选择；
- $\dots$
- 第 $n$ 次抽取有 $M-n+1$ 种选择。

根据乘法原理，这是从 $M$ 个不同元素中取出 $n$ 个元素的**排列数**：
$$ |\Omega| = P_M^n = A_M^n = M(M-1)\dots(M-n+1) = \frac{M!}{(M-n)!} $$

**情形 2.2：不放回、无序 (Without replacement, Unordered)**
在此情形下，我们只关心哪 $n$ 个球被抽中，而不关心顺序。同样要求 $n \le M$。
这是从 $M$ 个不同元素中取出 $n$ 个元素的**组合数**。
由于在情形 2.1（有序）中，每一组选定的 $n$ 个球都有 $n!$ 种不同的排列方式，因此我们将有序的结果除以 $n!$ 即可得到无序的结果：
$$ |\Omega| = C_M^n = \binom{M}{n} = \frac{P_M^n}{n!} = \frac{M!}{n!(M-n)!} $$
这对应于物理统计中的费米-狄拉克统计（Fermi-Dirac statistics）的计数模型。

### 答案

样本空间的大小 $|\Omega|$ 分别为：

1.  **有放回，有序**：
    $$ M^n $$
2.  **有放回，无序**：
    $$ \binom{M+n-1}{n} $$
3.  **不放回，有序**：
    $$ \frac{M!}{(M-n)!} $$
4.  **不放回，无序**：
    $$ \binom{M}{n} = \frac{M!}{n!(M-n)!} $$

### 知识延伸

1.  **核心定理**：本题涵盖了组合数学的四个基本计数模型（映射、多重集组合、排列、组合）。
2.  **隔板法（Stars and Bars）**：解决“有放回、无序”问题的关键技巧。它将“从 $M$ 类元素中允许重复地取 $n$ 个”转化为“将 $n$ 个相同物品分给 $M$ 个不同组”的问题。
3.  **易错点**：
    - 学生常混淆“有放回无序”的情况，错误地认为是 $\frac{M^n}{n!}$，这是不正确的，因为在有放回的情况下，不同组合出现的概率权重并不相等（例如 $\{1,1\}$ 和 $\{1,2\}$ 的排列数不同）。
    - 符号表示：注意 $P_M^n$ (或 $A_M^n$) 与 $C_M^n$ (或 $\binom{M}{n}$) 的区别。
4.  **物理背景**：
    - **Maxwell-Boltzmann**：粒子可区分，任何能级容纳任意数量粒子（对应：有放回，有序）。
    - **Bose-Einstein**：粒子不可区分，任何能级容纳任意数量粒子（对应：有放回，无序）。
    - **Fermi-Dirac**：粒子不可区分，每个能级最多容纳一个粒子（对应：不放回，无序）。

---
