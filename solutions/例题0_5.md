# 例题0.5

## 题目

在0 到200 的整数中， 求A = {能被 3 整除的数}，B = {能被 5 整除的数}， 和C = {能被7 整除 的数} 并集的大小。

## 解答

**Reviewing Calculations**

\n\n

I've carefully re-examined the arithmetic within the Inclusion-Exclusion Principle application. Each set's cardinality has been verified, and the intersections appear correctly calculated. The final result of 109 seems sound, considering the range and divisibility criteria.


### 题目分析

本题要求计算在整数区间 $[0, 200]$ 内，能被 3、5 或 7 整除的数的集合并集的大小。这是一个典型的集合计数问题，考查的核心概念是**容斥原理（Inclusion-Exclusion Principle）**。虽然本题属于组合数学范畴，但它是概率论中计算事件并集概率 $P(A \cup B \cup C)$ 的基础模型。解题的关键在于正确计算各个集合及其交集的基数，并注意区间包含 $0$ 这一特殊情况。

### 解题过程

定义全集为 $\Omega = \{0, 1, 2, \dots, 200\}$。
设 $A$ 为能被 3 整除的数，$B$ 为能被 5 整除的数，$C$ 为能被 7 整除的数。
我们需要求解的是 $|A \cup B \cup C|$。

根据**容斥原理**，三个集合并集的大小计算公式为：
$$|A \cup B \cup C| = |A| + |B| + |C| - (|A \cap B| + |A \cap C| + |B \cap C|) + |A \cap B \cap C|$$

**第一步：计算单个集合的基数**

在区间 $[0, n]$ 中，能被 $k$ 整除的数的个数为 $\lfloor \frac{n}{k} \rfloor + 1$（加 1 是因为 0 也能被任何非零整数整除）。

1.  计算 $|A|$（能被 3 整除）：
    $$|A| = \left\lfloor \frac{200}{3} \right\rfloor + 1 = 66 + 1 = 67$$
2.  计算 $|B|$（能被 5 整除）：
    $$|B| = \left\lfloor \frac{200}{5} \right\rfloor + 1 = 40 + 1 = 41$$
3.  计算 $|C|$（能被 7 整除）：
    $$|C| = \left\lfloor \frac{200}{7} \right\rfloor + 1 = 28 + 1 = 29$$

**第二步：计算两两交集的基数**

两个集合的交集意味着数必须同时被两个数整除，即被它们的**最小公倍数（LCM）**整除。

1.  计算 $|A \cap B|$（能被 $\text{lcm}(3, 5) = 15$ 整除）：
    $$|A \cap B| = \left\lfloor \frac{200}{15} \right\rfloor + 1 = 13 + 1 = 14$$
2.  计算 $|A \cap C|$（能被 $\text{lcm}(3, 7) = 21$ 整除）：
    $$|A \cap C| = \left\lfloor \frac{200}{21} \right\rfloor + 1 = 9 + 1 = 10$$
3.  计算 $|B \cap C|$（能被 $\text{lcm}(5, 7) = 35$ 整除）：
    $$|B \cap C| = \left\lfloor \frac{200}{35} \right\rfloor + 1 = 5 + 1 = 6$$

**第三步：计算三个集合交集的基数**

三个集合的交集意味着数必须同时被 3、5、7 整除。

1.  计算 $|A \cap B \cap C|$（能被 $\text{lcm}(3, 5, 7) = 105$ 整除）：
    $$|A \cap B \cap C| = \left\lfloor \frac{200}{105} \right\rfloor + 1 = 1 + 1 = 2$$
    *(注：这两个数是 0 和 105)*

**第四步：代入容斥原理公式**

$$
\begin{aligned}
|A \cup B \cup C| &= (67 + 41 + 29) - (14 + 10 + 6) + 2 \\
&= 137 - 30 + 2 \\
&= 109
\end{aligned}
$$

### 答案

$$|A \cup B \cup C| = 109$$

### 知识延伸

本题主要涉及**容斥原理**，这是概率论中计算复合事件概率的重要工具。

**核心公式：**
对于 $n$ 个有限集合 $A_1, \dots, A_n$，其并集大小为：
$$ \left| \bigcup_{i=1}^n A_i \right| = \sum_{1 \le i \le n} |A_i| - \sum_{1 \le i < j \le n} |A_i \cap A_j| + \sum_{1 \le i < j < k \le n} |A_i \cap A_j \cap A_k| - \dots + (-1)^{n-1} |A_1 \cap \dots \cap A_n| $$

**在概率论中的对应形式：**
$$ P\left( \bigcup_{i=1}^n A_i \right) = \sum P(A_i) - \sum P(A_i \cap A_j) + \dots $$

**常见易错点：**
1.  **边界问题**：题目区间是 $[0, 200]$ 还是 $[1, 200]$。若从 0 开始，必须考虑 0 能被任意非零整数整除，计数时需 $+1$。
2.  **交集定义**：计算交集时应使用除数的**最小公倍数**，而非简单的乘积（尽管本题中 3, 5, 7 互质，乘积等于最小公倍数，但在非互质情况下直接相乘会导致错误）。

---
