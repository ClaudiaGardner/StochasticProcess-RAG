# 例题4.10

## 题目

反例设 {Xi; i ⩾ 1} 是一个二元独立同分布的随机变量序列，每个随机变量以概率1/2 取值0， 以概率1/2 取值 2。令 Mn = X1X2 · · ·Xn。 • 可以看出，当n → ∞ 时，有limn→∞ Mn = 0 ，以概率 1 成立。 • 同样地，对于所有n ⩾ 1，有 E[Mn] = 1 。 因此，时间平均存在且以概率 1 等于 0，集合平均存在且对所有 n 等于 1，但这两者是不同的。 【定理4.11】 （N(t) 的中心极限定理）假设一个计数过程{N(t); t > 0} 的间隔时间有有限的标准差σ > 0， 则 lim t→∞ P ( N(t) − t/X σX −3/2√ t < α ) = Φ( α)， 其中 Φ(y) = Z y −∞ 1√ 2π exp(−x2/2)dx。 这个定理表明，N(t) 的累积分布函数（CDF）趋近于均值为 t/X，标准差为 σX −3/2√ t 的高斯分布。 证明思路：当 t 足够大时，Sn 的均值是 n ¯X, 方差是 nσ2, 所以，Sn−n ¯X√nσ 可以用标准正态分布近似描述。 {Sn ≤ t} 等价于 {N(t) ≥ n}。 • t = nX + α√nσ • n ≈ t/X − ασ q t/X/X

## 解答

**Refining Derivations**

I'm now focusing on the derivation of the Central Limit Theorem for Renewal Processes. I'm incorporating the specific suggestion from the text ($t = n\mu + \alpha\sigma\sqrt{n}$) to align the derivation with the example's structure. I'm also preparing the final formatting with LaTeX to ensure readability.


### 题目分析

本段文本包含两个独立的部分，分别涉及概率论中的收敛性反例和随机过程中的更新过程（Renewal Process）中心极限定理。

1.  **例题 4.10**：这是一个关于**随机变量序列收敛性**的反例。它展示了一个乘积型随机过程（类似于鞅），说明了“几乎处处收敛”（Almost Sure Convergence）与“依均值收敛”（Convergence in Mean）或“期望的极限”是不等价的。具体来说，序列的极限是 0，但序列期望的极限是 1。
2.  **定理 4.11**：这是**更新过程的中心极限定理**。它描述了当时间 $t \to \infty$ 时，计数过程 $N(t)$ 的分布趋于正态分布。题目给出了证明思路，利用到达时间 $S_n$ 与计数过程 $N(t)$ 的对偶关系，结合 $S_n$ 的中心极限定理进行推导。

**核心考点**：
*   独立同分布（i.i.d.）序列的性质
*   几乎处处收敛 vs. 期望收敛
*   更新过程（Renewal Process）
*   中心极限定理（CLT）及其在随机过程中的应用

---

### 解题过程

#### 第一部分：例题 4.10（收敛性反例）

**1. 定义随机变量**
设 $\{X_i; i \ge 1\}$ 为独立同分布（i.i.d.）序列，分布律为：
$$P(X_i = 0) = \frac{1}{2}, \quad P(X_i = 2) = \frac{1}{2}$$
定义累积乘积 $M_n = X_1 X_2 \cdots X_n$。

**2. 计算期望（集合平均）**
由于 $X_i$ 相互独立，期望具有乘积性质：
$$E[M_n] = E[X_1 X_2 \cdots X_n] = \prod_{i=1}^n E[X_i]$$
计算单个变量的期望：
$$E[X_i] = 0 \cdot \frac{1}{2} + 2 \cdot \frac{1}{2} = 1$$
因此，对于任意 $n \ge 1$：
$$E[M_n] = 1^n = 1$$
这意味着**集合平均**（Ensemble Average）恒为 1。

**3. 分析极限行为（时间平均）**
考虑序列 $M_n$ 的取值。只要序列 $\{X_1, \dots, X_n\}$ 中出现至少一个 0，则 $M_n = 0$。
$M_n \neq 0$ 的充要条件是所有 $X_i$ 都取 2。
$$P(M_n \neq 0) = P(X_1=2, X_2=2, \dots, X_n=2) = \prod_{i=1}^n P(X_i=2) = \left(\frac{1}{2}\right)^n$$
当 $n \to \infty$ 时：
$$\lim_{n \to \infty} P(M_n \neq 0) = \lim_{n \to \infty} \left(\frac{1}{2}\right)^n = 0$$
这意味着 $M_n$ 以概率 1 收敛于 0：
$$P\left(\lim_{n \to \infty} M_n = 0\right) = 1$$
即**时间平均**（Time Average）以概率 1 等于 0。

**结论**：$\lim_{n \to \infty} E[M_n] = 1 \neq E[\lim_{n \to \infty} M_n] = 0$。

---

#### 第二部分：定理 4.11（N(t) 的中心极限定理）

**1. 符号定义**
设 $\{N(t); t > 0\}$ 为更新过程。
*   $X_i$ 为第 $i$ 个间隔时间（Interarrival time）。
*   均值 $E[X_i] = \mu$（题目中记为 $\bar{X}$ 或 $X$）。
*   方差 $\text{Var}(X_i) = \sigma^2$。
*   $S_n = \sum_{i=1}^n X_i$ 为第 $n$ 个事件发生的时刻。

**2. 基本关系与 $S_n$ 的 CLT**
更新过程的核心对偶关系为：
$$\{N(t) \ge n\} \iff \{S_n \le t\}$$
根据独立同分布随机变量和的中心极限定理（CLT），当 $n$ 很大时，$S_n$ 近似服从正态分布：
$$S_n \sim \mathcal{N}(n\mu, n\sigma^2)$$
即标准化变量 $\frac{S_n - n\mu}{\sigma\sqrt{n}} \xrightarrow{d} \mathcal{N}(0, 1)$。

**3. 推导 $N(t)$ 的分布**
我们要寻找 $N(t)$ 的分布。根据题目提示的思路，考虑边界情况。
设 $t$ 与 $n$ 满足如下关系（$n$ 为 $N(t)$ 的某个分位点）：
$$t = n\mu + \alpha\sigma\sqrt{n}$$
这表示 $t$ 是 $S_n$ 分布中的“均值 + $\alpha$ 倍标准差”。此时 $P(S_n \le t) \approx \Phi(\alpha)$。
由对偶关系，$P(N(t) \ge n) \approx \Phi(\alpha)$。

我们需要将 $n$ 表示为 $t$ 的函数。从方程 $t \approx n\mu + \alpha\sigma\sqrt{n}$ 反解 $n$。
首先，当 $t$ 很大时，一阶近似为 $n \approx \frac{t}{\mu}$。
将此代入 $\sqrt{n}$ 项进行二阶近似：
$$t \approx n\mu + \alpha\sigma\sqrt{\frac{t}{\mu}}$$
解出 $n$：
$$n\mu \approx t - \alpha\sigma\sqrt{\frac{t}{\mu}}$$
$$n \approx \frac{t}{\mu} - \alpha \frac{\sigma}{\mu} \sqrt{\frac{t}{\mu}} = \frac{t}{\mu} - \alpha \frac{\sigma}{\mu^{3/2}} \sqrt{t}$$

**4. 整理概率表达式**
题目要求证明的形式是关于 $N(t)$ 的标准化。
令 $y = -\alpha$（利用正态分布对称性调整符号方向，通常 $N(t)$ 的均值是 $t/\mu$）。
更严谨的推导如下：
我们考察 $P(N(t) < n)$。令 $n = \frac{t}{\mu} + y \frac{\sigma}{\mu^{3/2}}\sqrt{t}$。
$$P\left( \frac{N(t) - t/\mu}{\sigma \mu^{-3/2} \sqrt{t}} < y \right) = P(N(t) < n) = P(S_n > t)$$
对 $S_n$ 标准化：
$$P(S_n > t) = P\left( \frac{S_n - n\mu}{\sigma\sqrt{n}} > \frac{t - n\mu}{\sigma\sqrt{n}} \right)$$
分析不等式右边的项：
分子：$t - n\mu = t - \mu(\frac{t}{\mu} + y \frac{\sigma}{\mu^{3/2}}\sqrt{t}) = -y \frac{\sigma}{\sqrt{\mu}}\sqrt{t}$。
分母：$\sigma\sqrt{n} \approx \sigma\sqrt{t/\mu} = \frac{\sigma}{\sqrt{\mu}}\sqrt{t}$ （当 $t \to \infty$）。
因此，右边项趋近于：
$$\frac{-y \frac{\sigma}{\sqrt{\mu}}\sqrt{t}}{\frac{\sigma}{\sqrt{\mu}}\sqrt{t}} = -y$$
所以：
$$P(S_n > t) \approx P(Z > -y) = 1 - \Phi(-y) = \Phi(y)$$
其中 $Z$ 是标准正态变量。

这证明了：
$$\lim_{t \to \infty} P \left( \frac{N(t) - t/\mu}{\sigma \mu^{-3/2}\sqrt{t}} < y \right) = \Phi(y)$$

---

### 答案

**例题 4.10 结论**：
对于该二元独立同分布序列，当 $n \to \infty$ 时：
$$ \lim_{n \to \infty} M_n = 0 \quad (\text{以概率 1 成立}) $$
$$ E[M_n] = 1 \quad (\text{对所有 } n \ge 1) $$
证明了随机序列的几乎处处极限与期望的极限可以不相等。

**定理 4.11 结论**：
更新计数过程 $N(t)$ 服从渐近正态分布。其累积分布函数趋近于高斯分布，均值为 $\frac{t}{\mu}$，方差为 $\frac{\sigma^2 t}{\mu^3}$。
数学公式表达为：
$$ \lim_{t \to \infty} P \left( \frac{N(t) - \frac{t}{\mu}}{\sqrt{\frac{\sigma^2 t}{\mu^3}}} < \alpha \right) = \Phi(\alpha) $$
其中 $\mu = E[X]$（题目中对应 $\bar{X}$），$\sigma^2 = \text{Var}(X)$。

---

### 知识延伸

1.  **收敛模式的区别**：例题 4.10 典型地展示了**几乎处处收敛**（Almost Sure Convergence）并不蕴含**$L_p$收敛**（如均方收敛或平均收敛）。这通常发生在序列虽然以大概率趋于 0，但在极小概率下取值非常大（或者像本题中，概率质量逃逸到无穷远处或被稀释）的情况。
2.  **更新过程的矩**：
    *   $E[N(t)] \approx \frac{t}{\mu}$ （基本更新定理）
    *   $\text{Var}(N(t)) \approx \frac{\sigma^2 t}{\mu^3}$ （这是很多学生容易记错的公式，注意分母是 $\mu^3$）。
3.  **Delta 方法**：$N(t)$ 的方差公式也可以通过 Delta 方法直观理解。由于 $N(t) \approx \frac{t}{\bar{X}_n}$，对函数 $f(x) = t/x$ 在 $\mu$ 处展开，可得方差近似为 $(f'(\mu))^2 \cdot \text{Var}(\bar{X}_n) = (-\frac{t}{\mu^2})^2 \cdot \frac{\sigma^2}{n} \approx \frac{t^2}{\mu^4} \cdot \frac{\sigma^2}{t/\mu} = \frac{\sigma^2 t}{\mu^3}$。
4.  **易错点**：在书写 $N(t)$ 的 CLT 时，务必注意标准化分母是 $\sqrt{t}\sigma \mu^{-3/2}$ 而不是简单的 $\sqrt{t}\sigma$。

---
