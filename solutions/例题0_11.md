# 例题0.11

## 题目

现有三个袋子，编号为 i = 1 , 2, 3，已知第 i 个袋子有 bi 个黑球和 wi 个白球，现在随机的选 择一个袋子，然后在这个袋子中随机的选择一个球，选中黑球的概率是多少？若已知选取的是黑球，如何推断黑 球的袋来源？

## 解答

**Examining Problem's Structure**

I'm currently focused on dissecting the problem's structure. I've broken it down into key stages and components. I'm focusing on identifying the core concepts such as the total probability formula and Bayes' theorem. I am now working on defining the symbols and formulating the goals, specifically calculating P(Black) and P(Bag i | Black).


### 题目分析

本题描述了一个典型的两阶段随机试验模型。第一阶段是从三个袋子中随机选择一个，第二阶段是从选中的袋子中随机抽取一个球。题目中涉及的数学符号包括袋子编号 $i=1,2,3$，以及第 $i$ 个袋子中黑球数量 $b_i$ 和白球数量 $w_i$。

本题考查的核心概念是概率论中的**全概率公式（Law of Total Probability）**和**贝叶斯公式（Bayes' Theorem）**。

需要求解的目标有两个：
1.  计算选中黑球的边缘概率（无条件概率）。
2.  在已知选中黑球的条件下，推断该球来自特定袋子的后验概率。

### 解题过程

**1. 定义事件与参数**

设 $A_i$ 表示“选中第 $i$ 个袋子”的事件，其中 $i = 1, 2, 3$。
设 $B$ 表示“选中黑球”的事件。

根据题目描述，“随机的选择一个袋子”意味着选择每个袋子的概率是相等的。因此，事件 $A_1, A_2, A_3$ 构成了样本空间的一个划分（完备事件组），且先验概率为：
$$P(A_1) = P(A_2) = P(A_3) = \frac{1}{3}$$

在已知选中第 $i$ 个袋子的情况下，选中黑球的条件概率 $P(B|A_i)$ 取决于该袋子中黑球数 $b_i$ 与总球数 $b_i + w_i$ 的比例：
$$P(B|A_i) = \frac{b_i}{b_i + w_i}, \quad i = 1, 2, 3$$

**2. 求解选中黑球的概率**

根据**全概率公式**，事件 $B$ 发生的概率等于在各个划分 $A_i$ 下 $B$ 发生概率的加权和：
$$P(B) = \sum_{i=1}^{3} P(A_i) P(B|A_i)$$

将已知数值代入公式：
$$P(B) = \frac{1}{3} \cdot \frac{b_1}{b_1 + w_1} + \frac{1}{3} \cdot \frac{b_2}{b_2 + w_2} + \frac{1}{3} \cdot \frac{b_3}{b_3 + w_3}$$

提取公因子 $\frac{1}{3}$，可得：
$$P(B) = \frac{1}{3} \sum_{i=1}^{3} \frac{b_i}{b_i + w_i}$$

**3. 推断黑球的袋来源**

题目要求“若已知选取的是黑球，如何推断黑球的袋来源”，即求解在事件 $B$ 发生的条件下，事件 $A_k$ ($k \in \{1, 2, 3\}$) 发生的条件概率 $P(A_k|B)$。

根据**贝叶斯公式**：
$$P(A_k|B) = \frac{P(A_k) P(B|A_k)}{P(B)}$$

将分子代入具体表达式：
$$P(A_k) P(B|A_k) = \frac{1}{3} \cdot \frac{b_k}{b_k + w_k}$$

将分母 $P(B)$ 代入（利用上一步的结果）：
$$P(B) = \frac{1}{3} \sum_{i=1}^{3} \frac{b_i}{b_i + w_i}$$

因此，后验概率为：
$$P(A_k|B) = \frac{\frac{1}{3} \cdot \frac{b_k}{b_k + w_k}}{\frac{1}{3} \sum_{i=1}^{3} \frac{b_i}{b_i + w_i}}$$

消去分子分母中的 $\frac{1}{3}$，得到最终表达式：
$$P(A_k|B) = \frac{\frac{b_k}{b_k + w_k}}{\sum_{i=1}^{3} \frac{b_i}{b_i + w_i}}$$

### 答案

1.  选中黑球的概率为：
$$P(B) = \frac{1}{3} \sum_{i=1}^{3} \frac{b_i}{b_i + w_i}$$

2.  已知选取的是黑球，该球来自第 $k$ 个袋子 ($k=1,2,3$) 的概率为：
$$P(A_k|B) = \frac{\frac{b_k}{b_k + w_k}}{\sum_{i=1}^{3} \frac{b_i}{b_i + w_i}}$$

### 知识延伸

**1. 核心定理总结**
*   **全概率公式**：用于计算复杂事件的概率，将其分解为若干个互不相容的简单情形下的概率之和。公式为 $P(B) = \sum P(A_i)P(B|A_i)$。
*   **贝叶斯公式**：用于“由果索因”，即在观察到结果（事件 $B$）后，更新对原因（事件 $A_i$）的概率估计（后验概率）。公式为 $P(A_k|B) = \frac{P(A_k)P(B|A_k)}{\sum P(A_i)P(B|A_i)}$。

**2. 解题技巧与易错点**
*   **完备性检查**：在使用全概率公式时，必须确保 $A_1, \dots, A_n$ 构成了样本空间的一个划分，即它们互不相容且和为全集 ($\sum P(A_i) = 1$)。
*   **先验概率**：题目中“随机选择一个袋子”隐含了均匀分布假设 ($P(A_i) = 1/n$)。如果题目改为“以概率 $p_i$ 选择第 $i$ 个袋子”，则公式中的 $1/3$ 需替换为对应的 $p_i$，且不能简单消去。
*   **符号区分**：注意区分 $P(B|A)$（似然度/条件概率）与 $P(A|B)$（后验概率）。前者是已知袋子找球的概率，后者是已知球找袋子的概率。

---
