# 例题2.22

## 题目

设某网店经营A，B 两种商品。A 商品下单到达是单位时间4 单，B 商品下单到达是单位时间 2 单，均是泊松过程。求： 27 2.4. 课后习题 (1) 前三个单位时间内收到 3 单的概率； (2) 已知前三个单位时间内收到 3 单，求至少有一个是B 订单的概率； (3) 第 2 个订单是B 订单的概率； (4) 第 2 个订单到达时间在第二个单位时间内的概率。

## 解答

**Calculating Solution Details**

\n\nI am now refining the LaTeX for the solution, focusing on clarity and conciseness, especially within the context of conditional probability and the Erlang distribution. Specifically, I'm ensuring all mathematical notation is correct, and I've double-checked the formulas for the relevant probability calculations, particularly for the final probability, and confirmed my approach to finding the probability of the second order arrival in the second unit time is correct.


### 题目分析

本题考查**泊松过程（Poisson Process）**的核心性质，具体涉及以下概念：
1.  **泊松过程的可加性（合成）**：两个独立的泊松过程之和仍为泊松过程，其参数为两者参数之和。
2.  **泊松分布的概率计算**：计算特定时间段内发生特定次数事件的概率。
3.  **条件分布与二项分布**：已知总事件发生次数，求某一类事件发生次数的条件概率，利用泊松过程的稀疏分解性质。
4.  **到达时间与计数过程的关系**：第 $n$ 个事件的到达时间 $S_n$ 与计数过程 $N(t)$ 之间的等价关系。

题目已知条件：
- A 商品下单过程 $N_A(t)$ 是参数 $\lambda_A = 4$ 的泊松过程。
- B 商品下单过程 $N_B(t)$ 是参数 $\lambda_B = 2$ 的泊松过程。
- 两者相互独立。
- 总下单过程 $N(t) = N_A(t) + N_B(t)$ 是参数 $\lambda = \lambda_A + \lambda_B = 6$ 的泊松过程。

---

### 解题过程

#### (1) 求前三个单位时间内收到 3 单的概率

设总订单到达过程为 $\{N(t), t \ge 0\}$。由于 $N_A(t)$ 和 $N_B(t)$ 是独立的泊松过程，故 $N(t)$ 服从参数为 $\lambda = \lambda_A + \lambda_B = 4 + 2 = 6$ 的泊松过程。
前三个单位时间即 $t=3$。随机变量 $N(3)$ 服从参数为 $\lambda t = 6 \times 3 = 18$ 的泊松分布。

根据泊松分布公式 $P(N(t)=k) = \frac{e^{-\lambda t}(\lambda t)^k}{k!}$，代入 $k=3$：

$$
P(N(3)=3) = \frac{e^{-18} \cdot 18^3}{3!} = \frac{e^{-18} \cdot 5832}{6} = 972 e^{-18}
$$

#### (2) 已知前三个单位时间内收到 3 单，求至少有一个是 B 订单的概率

设 $K$ 为这 3 单中 B 订单的数量。
根据泊松过程的性质，已知在时间 $t$ 内发生了 $n$ 个事件（$N(t)=n$），其中属于类型 B 的事件个数 $K$ 服从二项分布 $B(n, p)$，其中成功概率 $p$ 为该类事件速率占总速率的比例：
$$
p = \frac{\lambda_B}{\lambda_A + \lambda_B} = \frac{2}{4+2} = \frac{1}{3}
$$
本题中 $n=3$，故 $K \sim B(3, \frac{1}{3})$。
我们需要求至少有一个 B 订单的概率，即 $P(K \ge 1 | N(3)=3)$。可以通过求对立事件“没有 B 订单（即全是 A 订单）”的概率来计算：

$$
\begin{aligned}
P(K \ge 1 | N(3)=3) &= 1 - P(K = 0 | N(3)=3) \\
&= 1 - \binom{3}{0} \left(\frac{1}{3}\right)^0 \left(1 - \frac{1}{3}\right)^3 \\
&= 1 - 1 \cdot 1 \cdot \left(\frac{2}{3}\right)^3 \\
&= 1 - \frac{8}{27} \\
&= \frac{19}{27}
\end{aligned}
$$

#### (3) 第 2 个订单是 B 订单的概率

在合并的泊松过程中，每一个到达的事件是 A 类还是 B 类是相互独立的，且只取决于速率的比值。
第 $k$ 个到达的订单是 B 订单的概率恒定为：
$$
P(\text{第 } k \text{ 个是 B}) = \frac{\lambda_B}{\lambda_A + \lambda_B}
$$
对于第 2 个订单：
$$
P(\text{第 2 个是 B}) = \frac{2}{4+2} = \frac{1}{3}
$$

#### (4) 第 2 个订单到达时间在第二个单位时间内的概率

设 $S_2$ 为第 2 个订单到达的时间。
“第二个单位时间”指的是时间区间 $(1, 2]$。我们需要求 $P(1 < S_2 \le 2)$。
利用到达时间 $S_n$ 与计数过程 $N(t)$ 的关系：事件 $\{S_n \le t\}$ 等价于事件 $\{N(t) \ge n\}$。
因此：
$$
P(1 < S_2 \le 2) = P(S_2 \le 2) - P(S_2 \le 1)
$$
将其转化为计数过程 $N(t)$ 的概率：
$$
\begin{aligned}
P(S_2 \le 2) &= P(N(2) \ge 2) = 1 - P(N(2)=0) - P(N(2)=1) \\
P(S_2 \le 1) &= P(N(1) \ge 2) = 1 - P(N(1)=0) - P(N(1)=1)
\end{aligned}
$$
已知 $N(t)$ 的参数 $\lambda = 6$。

1.  **计算 $t=2$ 时的情况**：
    参数为 $\lambda \times 2 = 12$。
    $$
    P(N(2) \ge 2) = 1 - e^{-12} \frac{12^0}{0!} - e^{-12} \frac{12^1}{1!} = 1 - e^{-12} - 12e^{-12} = 1 - 13e^{-12}
    $$

2.  **计算 $t=1$ 时的情况**：
    参数为 $\lambda \times 1 = 6$。
    $$
    P(N(1) \ge 2) = 1 - e^{-6} \frac{6^0}{0!} - e^{-6} \frac{6^1}{1!} = 1 - e^{-6} - 6e^{-6} = 1 - 7e^{-6}
    $$

3.  **求差值**：
    $$
    \begin{aligned}
    P(1 < S_2 \le 2) &= (1 - 13e^{-12}) - (1 - 7e^{-6}) \\
    &= 7e^{-6} - 13e^{-12}
    \end{aligned}
    $$

---

### 答案

(1) $972 e^{-18}$
(2) $\frac{19}{27}$
(3) $\frac{1}{3}$
(4) $7e^{-6} - 13e^{-12}$

---

### 知识延伸

1.  **泊松过程的合成与分解**：
    *   **合成**：$N_1(t) + N_2(t) \sim \text{Poisson}(\lambda_1 + \lambda_2)$。
    *   **分解（伯努利稀疏）**：若 $N(t)$ 是参数为 $\lambda$ 的泊松过程，每个事件以概率 $p$ 被归类为类型 1，以 $1-p$ 为类型 2，则类型 1 和类型 2 的过程分别是参数为 $\lambda p$ 和 $\lambda(1-p)$ 的独立泊松过程。

2.  **条件性质**：
    *   已知 $N(t)=n$，则这 $n$ 个事件发生的时刻 $S_1, \dots, S_n$ 服从区间 $(0, t]$ 上的均匀分布的次序统计量。
    *   已知 $N(t)=n$，其中某类事件的个数服从二项分布。

3.  **到达时间分布**：
    *   第 $n$ 个事件到达时间 $S_n$ 服从 Erlang 分布（参数为 $n, \lambda$），其概率密度函数为 $f(t) = \frac{\lambda^n t^{n-1} e^{-\lambda t}}{(n-1)!}$。第 (4) 问也可以通过对 $f_{S_2}(t)$ 在 $(1,2]$ 上积分求解。

4.  **解题技巧**：
    *   遇到“第 $n$ 个事件发生在时间 $t$ 之前”的问题，优先转化为“时间 $t$ 内发生的事件数 $\ge n$”来利用泊松分布公式计算，通常比积分更简单。

---
