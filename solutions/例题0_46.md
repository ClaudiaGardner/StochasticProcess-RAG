# 例题0.46

## 题目

有 r 个参赛人，其中参赛人 i(i = 1 ，...，r) 在开始时有 ni(ni > 0) 个单位（财富） 。在每一 阶段参赛人中的两个被选中比赛，赢者从输者那里得到一个单位。任何参赛人，当他的财富减少到 0 时就退出， 如此继续，直至某个参赛人占有所有单位的 n = Pr i=1 ni 个单位为止，此参赛人就是胜利者。假定相继比赛的 结果是独立的，而且在每次比赛中两个参赛人等可能地获胜，求参赛人 i 是胜利者的概率。 0.5.6 Monte Carlo 仿真

## 解答

**Reviewing the Approach**

I'm now revisiting the overall approach. While the core martingale argument is sound, I will ensure each step is rigorously justified in the LaTeX solution. My focus is on concise, step-by-step reasoning for the "解题过程" section, making sure the notation and definitions are clear. Then, I will focus on the LaTeX implementation.


### 题目分析

本题描述了一个多人的赌徒破产问题（Gambler's Ruin Problem）的推广情形。题目中给出了 $r$ 个参赛人，初始财富分别为 $n_i$，总财富为 $n = \sum_{i=1}^r n_i$。游戏规则的核心在于“公平性”：每次比赛两人对决，胜负概率各为 $0.5$，且赌注为 1 单位。这是一个典型的**随机游走（Random Walk）**问题，且具有**鞅（Martingale）**性质。我们需要求解的是某个特定参赛人最终赢得所有财富的概率。利用公平博弈下财富期望不变的性质（即鞅的停时定理）是解决此题最直接且严谨的方法。

### 解题过程

**1. 建立数学模型**

设 $X_{i,k}$ 表示第 $i$ 个参赛人在第 $k$ 次比赛结束后的财富值，其中 $i = 1, 2, \dots, r$，且 $k = 0, 1, 2, \dots$。
已知初始状态为：
$$X_{i,0} = n_i, \quad \forall i \in \{1, \dots, r\}$$
系统的总财富守恒，即对于任意时刻 $k$：
$$\sum_{j=1}^r X_{j,k} = n = \sum_{j=1}^r n_j$$

**2. 分析随机过程的性质（鞅性质）**

考虑第 $k+1$ 次比赛。假设被选中的两个参赛人为 $a$ 和 $b$。根据题目，两人获胜的概率均为 $0.5$。
对于任意参赛人 $i$，在第 $k+1$ 步的财富变化情况如下：
*   若参赛人 $i$ 未被选中参加比赛，则 $X_{i, k+1} = X_{i, k}$。
*   若参赛人 $i$ 被选中参加比赛，则：
    $$X_{i, k+1} = \begin{cases} X_{i, k} + 1, & \text{概率为 } 0.5 \\ X_{i, k} - 1, & \text{概率为 } 0.5 \end{cases}$$

我们需要计算在已知当前所有信息（记为 $\mathcal{F}_k$）的情况下，参赛人 $i$ 下一步财富的条件期望 $E[X_{i, k+1} | \mathcal{F}_k]$。
无论下一轮比赛选中哪两个人，对于特定的参赛人 $i$：
$$E[X_{i, k+1} - X_{i, k} | \mathcal{F}_k] = P(i \text{被选中}) \cdot [0.5(1) + 0.5(-1)] + P(i \text{未被选中}) \cdot 0 = 0$$

因此，
$$E[X_{i, k+1} | \mathcal{F}_k] = X_{i, k}$$
这表明随机序列 $\{X_{i, k}\}_{k \ge 0}$ 是一个**鞅（Martingale）**。

**3. 引入停时与边界条件**

设 $T$ 为游戏结束的时刻（停时）。游戏结束的条件是某一个参赛人拥有了所有 $n$ 个单位的财富，而其他人的财富均为 $0$。
由于状态空间是有限的，且 $0$ 和 $n$ 是吸收壁（对于单个玩家而言，一旦财富归零即退出，一旦达到 $n$ 游戏结束），可以证明游戏以概率 1 在有限时间内结束，即 $P(T < \infty) = 1$。

在时刻 $T$，对于参赛人 $i$，其最终财富 $X_{i, T}$ 只有两种可能：
1.  参赛人 $i$ 获胜，此时 $X_{i, T} = n$。
2.  参赛人 $i$ 失败（即其他人获胜），此时 $X_{i, T} = 0$。

设 $P_i$ 为参赛人 $i$ 最终获胜的概率。则 $X_{i, T}$ 的分布律为：
$$P(X_{i, T} = n) = P_i$$
$$P(X_{i, T} = 0) = 1 - P_i$$

**4. 应用鞅的停时定理**

根据鞅的性质（或有界收敛定理/可选停时定理），期望在停时处保持不变：
$$E[X_{i, T}] = E[X_{i, 0}]$$

代入初始值和终态分布：
$$E[X_{i, 0}] = n_i$$
$$E[X_{i, T}] = n \cdot P_i + 0 \cdot (1 - P_i) = n P_i$$

联立上述两式，得到方程：
$$n P_i = n_i$$

**5. 求解概率**

解上述方程得：
$$P_i = \frac{n_i}{n}$$

即参赛人 $i$ 获胜的概率等于其初始财富占总财富的比例。

### 答案

参赛人 $i$ 是胜利者的概率为：
$$P(\text{参赛人 } i \text{ 获胜}) = \frac{n_i}{\sum_{j=1}^r n_j}$$

### 知识延伸

1.  **鞅（Martingale）与公平博弈**：本题的核心在于识别出这是一个公平博弈模型。在公平博弈中，玩家未来的期望财富等于当前财富。利用这一性质（$E[X_T] = E[X_0]$）可以极大地简化关于“最终获胜概率”或“平均退出时间”的计算，避免了复杂的递推方程求解。
2.  **赌徒破产问题（Gambler's Ruin）**：这是经典的赌徒破产问题的推广。在经典的两人对决（$r=2$）中，若 A 有 $a$ 元，B 有 $b$ 元，A 破产 B 的概率为 $b/(a+b)$，A 赢光 B 的概率为 $a/(a+b)$。本题结论与此一致。
3.  **无关性**：值得注意的是，最终的获胜概率只与**初始财富**有关，而与每一轮**如何选择比赛对手**（只要选择机制不依赖于未来的输赢结果）无关。
4.  **蒙特卡洛仿真（Monte Carlo Simulation）**：题目末尾提到的仿真方法是另一种数值求解手段。当问题变得复杂（例如胜率不是 0.5，或者多人同时博弈规则改变）导致解析解难以推导时，可以通过计算机模拟成千上万次游戏过程，统计某人获胜的频率来近似概率。但在本题的理想数学模型下，解析解是精确的。

---
