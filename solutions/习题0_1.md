# 习题0.1

## 题目

从1 1100000范围中随机抽取一个数。请运用容斥定理计算这个数能被4，6和9中一个或多个整除的概率。

## 解答

**Finalizing the Calculation**

I'm now carefully integrating the LaTeX code into the Chinese solution and polishing the "Knowledge Extension" section. Also, I’ve verified all calculations, paying close attention to the floor function's behavior. I will stick to the standard range of one million as the prompt contained what seems like a typo, and this is a standard probability problem.


### 题目分析

本题考查古典概型中的**容斥定理（Principle of Inclusion-Exclusion）**以及初等数论中的**最小公倍数（LCM）**概念。

题目要求从集合 $\{1, 2, \dots, N\}$ 中随机抽取一个数，其中 $N=1,000,000$（根据题目语境“1 1100000”推断为1到1,000,000的范围），计算该数能被4、6或9整除的概率。

核心步骤包括：
1.  定义事件：设 $A, B, C$ 分别为被4，6，9整除的事件。
2.  计算各事件及其交集的基数：利用取整函数 $\lfloor \frac{N}{k} \rfloor$ 计算 $1$ 到 $N$ 中能被 $k$ 整除的整数个数。
3.  应用容斥定理求并集基数 $|A \cup B \cup C|$。
4.  计算概率：目标基数除以总样本空间基数。

### 解题过程

设样本空间为 $\Omega = \{1, 2, \dots, 1000000\}$，样本总数 $|\Omega| = 1,000,000$。

定义以下事件：
- $A$：选出的数能被 $4$ 整除。
- $B$：选出的数能被 $6$ 整除。
- $C$：选出的数能被 $9$ 整除。

我们需要求解的是事件 $A \cup B \cup C$ 的概率，即 $P(A \cup B \cup C)$。

根据**容斥定理**，事件 $A \cup B \cup C$ 中元素的个数为：
$$|A \cup B \cup C| = |A| + |B| + |C| - (|A \cap B| + |A \cap C| + |B \cap C|) + |A \cap B \cap C|$$

**第一步：计算单个集合的基数**

在 $1$ 到 $N$ 的范围内，能被 $k$ 整除的数的个数为 $\lfloor \frac{N}{k} \rfloor$。

1.  能被 $4$ 整除的数：
    $$|A| = \left\lfloor \frac{1000000}{4} \right\rfloor = 250,000$$

2.  能被 $6$ 整除的数：
    $$|B| = \left\lfloor \frac{1000000}{6} \right\rfloor = 166,666$$

3.  能被 $9$ 整除的数：
    $$|C| = \left\lfloor \frac{1000000}{9} \right\rfloor = 111,111$$

**第二步：计算两两交集的基数**

两个集合的交集意味着该数能同时被两个数整除，即被它们的**最小公倍数（LCM）**整除。

1.  $A \cap B$：能被 $\text{lcm}(4, 6) = 12$ 整除：
    $$|A \cap B| = \left\lfloor \frac{1000000}{12} \right\rfloor = 83,333$$

2.  $A \cap C$：能被 $\text{lcm}(4, 9) = 36$ 整除：
    $$|A \cap C| = \left\lfloor \frac{1000000}{36} \right\rfloor = 27,777$$

3.  $B \cap C$：能被 $\text{lcm}(6, 9) = 18$ 整除：
    $$|B \cap C| = \left\lfloor \frac{1000000}{18} \right\rfloor = 55,555$$

**第三步：计算三个集合交集的基数**

$A \cap B \cap C$：能被 $\text{lcm}(4, 6, 9)$ 整除。
由于 $4=2^2, 6=2\times3, 9=3^2$，则 $\text{lcm}(4, 6, 9) = 2^2 \times 3^2 = 36$。

$$|A \cap B \cap C| = \left\lfloor \frac{1000000}{36} \right\rfloor = 27,777$$

**第四步：代入容斥定理公式**

$$
\begin{aligned}
|A \cup B \cup C| &= (250,000 + 166,666 + 111,111) \\
&\quad - (83,333 + 27,777 + 55,555) \\
&\quad + 27,777
\end{aligned}
$$

计算各项和：
- 单个集合之和：$250,000 + 166,666 + 111,111 = 527,777$
- 两两交集之和：$83,333 + 27,777 + 55,555 = 166,665$
- 三个交集：$27,777$

代入计算：
$$|A \cup B \cup C| = 527,777 - 166,665 + 27,777 = 388,889$$

**第五步：计算概率**

$$P(A \cup B \cup C) = \frac{|A \cup B \cup C|}{|\Omega|} = \frac{388,889}{1,000,000}$$

### 答案

该数能被4，6和9中一个或多个整除的概率为：
$$0.388889$$

### 知识延伸

1.  **容斥定理（Inclusion-Exclusion Principle）**：
    用于计算有限个集合之并集的元素个数。对于三个集合，公式为：
    $$P(A \cup B \cup C) = \sum P(A_i) - \sum P(A_i \cap A_j) + P(A_i \cap A_j \cap A_k)$$
    该定理是概率论和组合数学中处理“至少发生一个”类问题的基础工具。

2.  **整除性与最小公倍数**：
    在处理整除问题时，事件“同时被 $a$ 和 $b$ 整除”等价于“被 $\text{lcm}(a, b)$ 整除”。
    **易错点**：直接使用乘积 $a \times b$ 而非 $\text{lcm}(a, b)$。例如本题中 $A \cap B$ 是被12整除，而非24。

3.  **取整函数（Floor Function）**：
    计算 $1$ 到 $N$ 中 $k$ 的倍数个数时，严格公式为 $\lfloor N/k \rfloor$。在 $N$ 很大时，可以直接用 $N/k$ 近似，但在精确计数问题中必须保留整数部分。

---
